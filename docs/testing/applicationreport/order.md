# Order Application - Blackbox Testing Report

### Meta

- Precondition:
  - Container database: up, seeded (with product, variant, and user data)
  - Container redis: not required
  - VNPay payment service: mocked

| Pass | Fail | Untested | N/A | Number of Test cases |
| ---- | ---- | -------- | --- | -------------------- |
| 16   | 0    | 0        | 0   | 16                   |

### Sheet

| #   | ID       | Test Case Description                                     | Test Case Procedure                                                                                                      | Expected Output                                                                                                                    | Inter-test case Dependence | Result | Test date   | Test data                                                                                                                                       | Note |
| --- | -------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ------ | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ---- |
| -   | -        | **TestCODOrderLifecycle**                                 |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 1   | O-COD-01 | Create COD order                                          | - Create order with COD payment provider<br/>- Include order items with product variants                                 | - Order successfully created<br/>- Status is Pending<br/>- IsPaid is false<br/>- PaymentURL is empty<br/>- TotalAmount is positive | -                          | Pass   | 11-Dec-2025 | - Provider: COD<br/>- RecipientName: `Cash Customer`<br/>- PhoneNumber: `+84123456789`<br/>- Address: `123 Cash Street`<br/>- Items: 2x variant |      |
| 2   | O-COD-02 | Get COD order                                             | - Get order by ID from previous test                                                                                     | - Order retrieved successfully<br/>- All fields match<br/>- Items populated with product and variant details                       | O-COD-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-COD-01                                                                                                                        |      |
| 3   | O-COD-03 | Update COD order address and status                       | - Update order address and status to Shipping                                                                            | - Order successfully updated<br/>- Address changed to new value<br/>- Status changed to Shipping                                   | O-COD-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-COD-01<br/>- Address: `456 New Cash Street, Hanoi`<br/>- Status: Shipping<br/>- IsPaid: false                                 |      |
| 4   | O-COD-04 | List orders with filters                                  | - List orders with ID filter and UserID filter                                                                           | - Returns at least 1 order<br/>- COD order is in the list<br/>- Provider is COD                                                    | O-COD-01                   | Pass   | 11-Dec-2025 | - Page: 1<br/>- Limit: 10<br/>- IDs: [OrderID from O-COD-01]<br/>- UserIDs: [seeded user ID]                                                    |      |
| -   | -        | **TestVNPayOrderLifecycle**                               |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 5   | O-VNP-01 | Create VNPAY order with single item                       | - Create order with VNPAY payment provider<br/>- Mock payment URL generation                                             | - Order successfully created<br/>- Status is Pending<br/>- IsPaid is false<br/>- PaymentURL is not empty                           | -                          | Pass   | 11-Dec-2025 | - Provider: VNPAY<br/>- RecipientName: `John Doe`<br/>- PhoneNumber: `+84912345678`<br/>- Address: `123 Test Street`<br/>- Items: 2x variant    |      |
| 6   | O-VNP-02 | Get VNPAY order                                           | - Get order by ID from previous test                                                                                     | - Order retrieved successfully<br/>- Provider is VNPAY<br/>- Status is Pending                                                     | O-VNP-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-VNP-01                                                                                                                        |      |
| 7   | O-VNP-03 | Update VNPAY order                                        | - Update order address                                                                                                   | - Order successfully updated<br/>- Address changed to new value                                                                    | O-VNP-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-VNP-01<br/>- Address: `456 Updated Address, Hanoi`<br/>- Status: Pending<br/>- IsPaid: false                                  |      |
| 8   | O-VNP-04 | VNPAY IPN Success - Verify payment and inventory decrease | - Get initial inventory quantity<br/>- Process successful IPN callback<br/>- Verify order updated<br/>- Verify inventory | - IPN returns success code 00<br/>- Order status is Processing<br/>- IsPaid is true<br/>- Inventory decreased by ordered quantity  | O-VNP-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-VNP-01<br/>- ResponseCode: 00<br/>- TransactionStatus: 00<br/>- Ordered Quantity: 2                                           |      |
| -   | -        | **TestVNPayOrderWithMultipleItems**                       |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 9   | O-VNM-01 | Create VNPAY order with multiple items                    | - Create order with 2 different product variants                                                                         | - Order successfully created<br/>- Has 2 items<br/>- TotalAmount equals sum of (price Ã— quantity) for all items                    | -                          | Pass   | 11-Dec-2025 | - Provider: VNPAY<br/>- RecipientName: `Multi Item Customer`<br/>- Items: [2x variant A, 1x variant B]                                          |      |
| -   | -        | **TestVNPayIPNFailure**                                   |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 10  | O-VNF-01 | Create VNPAY order for failure test                       | - Create order with VNPAY provider                                                                                       | - Order successfully created<br/>- Status is Pending<br/>- IsPaid is false                                                         | -                          | Pass   | 11-Dec-2025 | - Provider: VNPAY<br/>- RecipientName: `Jane Doe`<br/>- PhoneNumber: `+84987654321`<br/>- Items: 1x variant                                     |      |
| 11  | O-VNF-02 | VNPay IPN Failure - Order cancelled, inventory unchanged  | - Get initial inventory quantity<br/>- Process failed IPN callback<br/>- Verify order cancelled<br/>- Verify inventory   | - IPN returns error code (not 00)<br/>- Order status is Cancelled<br/>- IsPaid is false<br/>- Inventory unchanged                  | O-VNF-01                   | Pass   | 11-Dec-2025 | - OrderID: from O-VNF-01<br/>- ResponseCode: 24<br/>- TransactionStatus: 02                                                                     |      |
| -   | -        | **TestGetNonExistentOrder**                               |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 12  | O-ERR-01 | Get non-existent order fails                              | - Attempt to get order with ID that does not exist                                                                       | - Operation fails with error<br/>- Error indicates order not found                                                                 | -                          | Pass   | 11-Dec-2025 | - OrderID: `00000000-0000-0000-0000-000000000001`                                                                                               |      |
| -   | -        | **TestUpdateNonExistentOrder**                            |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 13  | O-ERR-02 | Update non-existent order fails                           | - Attempt to update order with ID that does not exist                                                                    | - Operation fails with error<br/>- Error indicates order not found                                                                 | -                          | Pass   | 11-Dec-2025 | - OrderID: `00000000-0000-0000-0000-000000000001`<br/>- Address: `New Address`<br/>- Status: Pending<br/>- IsPaid: false                        |      |
| -   | -        | **TestCreateOrderWithNonExistentProduct**                 |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 14  | O-ERR-03 | Create order with non-existent product fails              | - Attempt to create order with product ID that does not exist                                                            | - Operation fails with error<br/>- Error indicates product not found                                                               | -                          | Pass   | 11-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`<br/>- VariantID: non-existent<br/>- Quantity: 1<br/>- Provider: COD                         |      |
| -   | -        | **TestOrderValidationDefectEmptyItems**                   |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 15  | O-VAL-01 | Create order with empty items list fails                  | - Attempt to create order with empty items array                                                                         | - Operation fails with error<br/>- Error indicates validation failure                                                              | -                          | Pass   | 11-Dec-2025 | - RecipientName: `Test`<br/>- PhoneNumber: `+84912345678`<br/>- Address: `Test`<br/>- Provider: COD<br/>- Items: []                             |      |
| -   | -        | **TestOrderValidationDefectInvalidPhoneNumber**           |                                                                                                                          |                                                                                                                                    |                            |        |             |                                                                                                                                                 |      |
| 16  | O-VAL-02 | Create order with invalid phone number fails              | - Attempt to create order with invalid phone number format                                                               | - Operation fails with error<br/>- Error indicates validation failure                                                              | -                          | Pass   | 11-Dec-2025 | - RecipientName: `Test`<br/>- PhoneNumber: `invalid-phone`<br/>- Address: `Test`<br/>- Provider: COD<br/>- Items: [1x valid variant]            |      |
