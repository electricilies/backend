# Product Application - Blackbox Testing Report

### Meta

- Precondition:
  - Container database: up, seeded (with category, attribute, product data)
  - Container redis: up
  - Container minio (S3): up

| Pass | Fail | Untested | N/A | Number of Test cases |
| ---- | ---- | -------- | --- | -------------------- |
| 56   | 2    | 0        | 0   | 58                   |

### Sheet

| #   | ID      | Test Case Description                                     | Test Case Procedure                                                                                         | Expected Output                                                                                                                                      | Inter-test case Dependence | Result | Test date   | Test data                                                                                                                                                          | Note                                                                             |
| --- | ------- | --------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ------ | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------- |
| -   | -       | **TestProductLifecycleSuite**                             |                                                                                                             |                                                                                                                                                      |                            |        |             |                                                                                                                                                                    |                                                                                  |
| 1   | P-PL-01 | Create simple product with single variant and no options  | - Get upload URLs for 2 images<br/>- Upload images to S3<br/>- Create product with 1 variant                | - Product successfully created<br/>- Returns correct name, description<br/>- Has 1 variant<br/>- Has 2 images<br/>- Min price equals variant price   | -                          | Fail   | 13-Dec-2025 | - Name: `Simple Test Product`<br/>- Category: seeded<br/>- Attributes: 1<br/>- Variants: 1<br/>- Images: 2                                                         | **DF-P-AR-01**: Attributes not returned in response                              |
| 2   | P-PL-02 | Get created product                                       | - Get product by ID from previous test                                                                      | - Product retrieved successfully<br/>- All fields match<br/>- Category populated<br/>- Attributes populated<br/>- Images present                     | P-PL-01                    | Fail   | 13-Dec-2025 | - ProductID: from P-PL-01                                                                                                                                          | **DF-P-AR-01**: Attributes not returned in response                              |
| 3   | P-PL-03 | Get product again to test Redis cache hit                 | - Get same product again                                                                                    | - Product retrieved successfully<br/>- Data matches previous get (cache hit)                                                                         | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01                                                                                                                                          |                                                                                  |
| 4   | P-PL-04 | List products                                             | - List products with pagination and product ID filter                                                       | - Returns at least 1 product<br/>- Created product is in list<br/>- Total count includes new product                                                 | P-PL-01                    | Pass   | 13-Dec-2025 | - Page: 1<br/>- Limit: 100<br/>- ProductIDs: [from P-PL-01]                                                                                                        |                                                                                  |
| 5   | P-PL-05 | List products again to test Redis cache hit               | - List products with same parameters                                                                        | - Results match previous list (cache hit)                                                                                                            | P-PL-04                    | Pass   | 13-Dec-2025 | - Page: 1<br/>- Limit: 10                                                                                                                                          |                                                                                  |
| 6   | P-PL-06 | Update product basic info                                 | - Update product name and description                                                                       | - Product updated successfully<br/>- Name changed to new value<br/>- Description changed to new value                                                | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01<br/>- Name: `Updated Simple Product`<br/>- Description: `Updated description for test product`                                           |                                                                                  |
| 7   | P-PL-07 | Get product after update to verify cache invalidation     | - Get product after update                                                                                  | - Returns updated name and description<br/>- Cache was invalidated and refreshed                                                                     | P-PL-06                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01                                                                                                                                          |                                                                                  |
| 8   | P-PL-08 | Update product variant                                    | - Get product to retrieve variant ID<br/>- Update variant price and quantity                                | - Variant updated successfully<br/>- Price changed to 600000<br/>- Quantity changed to 150                                                           | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01<br/>- VariantID: from first variant<br/>- Price: 600000<br/>- Quantity: 150                                                              |                                                                                  |
| 9   | P-PL-09 | Add new images to product                                 | - Get upload URLs for 2 images<br/>- Upload images to S3<br/>- Add images to product                        | - Images added successfully<br/>- Returns 2 new images                                                                                               | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01<br/>- Images: 2 new images                                                                                                               |                                                                                  |
| 10  | P-PL-10 | Add new images to variant                                 | - Get product to retrieve variant ID<br/>- Get upload URL<br/>- Upload image<br/>- Add image to variant     | - Image added successfully to variant                                                                                                                | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01<br/>- VariantID: from first variant<br/>- Images: 1 new image                                                                            |                                                                                  |
| 11  | P-PL-11 | Delete specific images                                    | - Get product to retrieve image IDs<br/>- Delete 1 product image                                            | - Image soft-deleted successfully<br/>- Product still has remaining images                                                                           | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01<br/>- ImageIDs: [first image ID]                                                                                                         |                                                                                  |
| 12  | P-PL-12 | Soft delete product                                       | - Delete product by ID                                                                                      | - Product soft-deleted successfully<br/>- All variants soft-deleted<br/>- All images soft-deleted                                                    | P-PL-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01                                                                                                                                          |                                                                                  |
| 13  | P-PL-13 | Get deleted product fails                                 | - Attempt to get soft-deleted product                                                                       | - Operation fails with error<br/>- Error indicates product not found                                                                                 | P-PL-12                    | Pass   | 13-Dec-2025 | - ProductID: from P-PL-01                                                                                                                                          |                                                                                  |
| 14  | P-PL-14 | List products excludes deleted                            | - List products without deleted filter                                                                      | - Deleted product not in list                                                                                                                        | P-PL-12                    | Pass   | 13-Dec-2025 | - Page: 1<br/>- Limit: 100                                                                                                                                         |                                                                                  |
| -   | -       | **TestProductWithOptionsLifecycleSuite**                  |                                                                                                             |                                                                                                                                                      |                            |        |             |                                                                                                                                                                    |                                                                                  |
| 15  | P-PO-01 | Create configurable product with options (partial matrix) | - Get upload URLs for 3 product images and 2 variant images<br/>- Create product with 2 options, 4 variants | - Product created successfully<br/>- Has 2 options<br/>- Has 4 variants (partial matrix)<br/>- Variants linked to correct option values              | -                          | Pass   | 13-Dec-2025 | - Name: `Configurable Test Product`<br/>- Options: Size (S,M,L), Color (Red,Blue)<br/>- Variants: S+Red, M+Blue, L+Red, L+Blue<br/>- Images: 3 product + 2 variant |                                                                                  |
| 16  | P-PO-02 | Get product with options                                  | - Get product by ID                                                                                         | - Product retrieved successfully<br/>- Options present with correct names<br/>- Option values present<br/>- Variants have correct option value links | P-PO-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01                                                                                                                                          |                                                                                  |
| 17  | P-PO-03 | Update option name                                        | - Get product to retrieve option ID<br/>- Update option name                                                | - Option name updated successfully<br/>- Changed from "Size" to "Kích thước"<br/>- Variants still linked correctly                                   | P-PO-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01<br/>- OptionID: Size option<br/>- New Name: `Kích thước`                                                                                 |                                                                                  |
| 18  | P-PO-04 | Update option values                                      | - Get product to retrieve option value IDs<br/>- Update option value                                        | - Option value updated successfully<br/>- Changed from "S" to "Small"<br/>- Variants still linked correctly                                          | P-PO-01, P-PO-03           | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01<br/>- OptionID: Size option<br/>- ValueID: S value<br/>- New Value: `Small`                                                              |                                                                                  |
| 19  | P-PO-05 | Add more variants to existing product                     | - Get product to retrieve option value IDs<br/>- Add 2 new variants (S+Blue, M+Red)                         | - Variants added successfully<br/>- New variants link to existing option values<br/>- Total variants is now 6                                        | P-PO-01, P-PO-04           | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01<br/>- Variants: S+Blue (SKU: CONFIG-TEST-S-BLUE), M+Red (SKU: CONFIG-TEST-M-RED)                                                         |                                                                                  |
| 20  | P-PO-06 | Update specific variant                                   | - Get product to retrieve variant ID<br/>- Update variant price and quantity                                | - Variant updated successfully<br/>- Price changed to 150000<br/>- Quantity changed to 100                                                           | P-PO-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01<br/>- VariantID: M+Blue variant<br/>- Price: 150000<br/>- Quantity: 100                                                                  |                                                                                  |
| 21  | P-PO-07 | List products with filters                                | - Filter by category<br/>- Filter by price range<br/>- Search by name                                       | - Category filter returns correct products<br/>- Price filter returns products in range<br/>- Search returns matching products                       | P-PO-01                    | Pass   | 13-Dec-2025 | - CategoryIDs: [seeded category]<br/>- MinPrice: 100000, MaxPrice: 200000<br/>- Search: `Configurable`                                                             |                                                                                  |
| 22  | P-PO-08 | Delete product with options                               | - Delete product                                                                                            | - Product soft-deleted<br/>- All options soft-deleted<br/>- All option values soft-deleted<br/>- All variants soft-deleted                           | P-PO-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-PO-01                                                                                                                                          |                                                                                  |
| -   | -       | **TestProductAbnormalCasesSuite**                         |                                                                                                             |                                                                                                                                                      |                            |        |             |                                                                                                                                                                    |                                                                                  |
| 23  | P-AB-01 | Create product with non-existent category                 | - Attempt to create product with invalid category ID                                                        | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - CategoryID: `00000000-0000-0000-0000-000000000001`                                                                                                               |                                                                                  |
| 24  | P-AB-02 | Create product with non-existent attribute                | - Attempt to create product with invalid attribute ID                                                       | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - AttributeID: `00000000-0000-0000-0000-000000000001`<br/>- AttributeValueID: `00000000-0000-0000-0000-000000000001`                                               |                                                                                  |
| 25  | P-AB-03 | Create product without images                             | - Attempt to create product with empty images array                                                         | - Operation fails with validation error                                                                                                              | -                          | Pass   | 13-Dec-2025 | - Images: []                                                                                                                                                       |                                                                                  |
| 26  | P-AB-04 | Create product without variants                           | - Attempt to create product with empty variants array                                                       | - Operation fails with validation error                                                                                                              | -                          | Pass   | 13-Dec-2025 | - Variants: []                                                                                                                                                     |                                                                                  |
| 27  | P-AB-05 | Create product with invalid name (too short)              | - Attempt to create product with name < 3 chars                                                             | - Operation fails with validation error                                                                                                              | -                          | Pass   | 13-Dec-2025 | - Name: `AB` (2 chars)                                                                                                                                             |                                                                                  |
| 28  | P-AB-06 | Create product with invalid description (too short)       | - Attempt to create product with description < 10 chars                                                     | - Operation fails with validation error                                                                                                              | -                          | Pass   | 13-Dec-2025 | - Description: `Short` (5 chars)                                                                                                                                   |                                                                                  |
| 29  | P-AB-07 | Create product with invalid price (zero)                  | - Attempt to create product with variant price = 0                                                          | - Operation fails with validation error                                                                                                              | -                          | Pass   | 13-Dec-2025 | - Variant Price: 0                                                                                                                                                 |                                                                                  |
| 30  | P-AB-08 | Get non-existent product                                  | - Attempt to get product with ID that doesn't exist                                                         | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`                                                                                                                |                                                                                  |
| 31  | P-AB-09 | Update non-existent product                               | - Attempt to update product with ID that doesn't exist                                                      | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`                                                                                                                |                                                                                  |
| 32  | P-AB-10 | Delete non-existent product                               | - Attempt to delete product with ID that doesn't exist                                                      | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`                                                                                                                |                                                                                  |
| 33  | P-AB-11 | Add variant to non-existent product                       | - Attempt to add variant to non-existent product                                                            | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`                                                                                                                |                                                                                  |
| 34  | P-AB-12 | Update non-existent variant                               | - Use valid product ID but invalid variant ID                                                               | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: seeded product<br/>- VariantID: `00000000-0000-0000-0000-000000000001`                                                                                |                                                                                  |
| 35  | P-AB-13 | Add images with invalid product ID                        | - Attempt to add images to non-existent product                                                             | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-0000-0000-000000000001`                                                                                                                |                                                                                  |
| 36  | P-AB-14 | Add images to non-existent variant                        | - Use valid product ID but invalid variant ID                                                               | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: seeded product<br/>- VariantID: `00000000-0000-0000-0000-000000000001`                                                                                |                                                                                  |
| 37  | P-AB-15 | Delete non-existent images                                | - Use valid product ID but invalid image IDs                                                                | - Operation succeeds with no effect (graceful handling)                                                                                              | -                          | Pass   | 13-Dec-2025 | - ProductID: seeded product<br/>- ImageIDs: [`00000000-0000-0000-0000-000000000001`]                                                                               |                                                                                  |
| 38  | P-AB-16 | Update non-existent option                                | - Use valid product ID but invalid option ID                                                                | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: seeded product<br/>- OptionID: `00000000-0000-0000-0000-000000000001`                                                                                 |                                                                                  |
| 39  | P-AB-17 | Update non-existent option value                          | - Use valid product and option ID but invalid option value ID                                               | - Operation fails with error                                                                                                                         | -                          | Pass   | 13-Dec-2025 | - ProductID: seeded product<br/>- OptionID: seeded option<br/>- OptionValueID: `00000000-0000-0000-0000-000000000001`                                              |                                                                                  |
| -   | -       | **TestProductWithSeededDataSuite**                        |                                                                                                             |                                                                                                                                                      |                            |        |             |                                                                                                                                                                    |                                                                                  |
| 40  | P-SD-01 | Get seeded product by ID                                  | - Get product using seeded product ID                                                                       | - Product retrieved successfully<br/>- Category populated<br/>- Attributes populated<br/>- Options and variants populated<br/>- Images populated     | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-7000-0000-000278469304`                                                                                                                |                                                                                  |
| 41  | P-SD-02 | List products with seeded data                            | - List all products with pagination                                                                         | - Returns at least 1 seeded product<br/>- Seeded product is in list<br/>- Pagination metadata correct                                                | -                          | Pass   | 13-Dec-2025 | - Page: 1<br/>- Limit: 100                                                                                                                                         |                                                                                  |
| 42  | P-SD-03 | Add images to seeded product                              | - Get upload URLs<br/>- Upload images<br/>- Add images to seeded product                                    | - Images added successfully                                                                                                                          | -                          | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-7000-0000-000278469304`<br/>- Images: 2 new images                                                                                     |                                                                                  |
| 43  | P-SD-04 | Delete images from seeded product                         | - Get product to retrieve image IDs<br/>- Delete first image                                                | - Image soft-deleted successfully                                                                                                                    | P-SD-03                    | Pass   | 13-Dec-2025 | - ProductID: `00000000-0000-7000-0000-000278469304`<br/>- ImageID: first image from product                                                                        |                                                                                  |
| 44  | P-SD-05 | Filter products by seeded category                        | - List products filtered by category ID                                                                     | - Returns products belonging to category<br/>- All returned products have correct category                                                           | -                          | Pass   | 13-Dec-2025 | - CategoryID: `00000000-0000-7000-0000-000000001796`                                                                                                               |                                                                                  |
| 45  | P-SD-06 | Search products by name                                   | - Search products with Vietnamese text                                                                      | - Returns matching products                                                                                                                          | -                          | Pass   | 13-Dec-2025 | - Search: `Điện thoại`                                                                                                                                             |                                                                                  |
| 46  | P-SD-07 | Sort products by price ascending                          | - List products sorted by price asc                                                                         | - Products returned in ascending price order                                                                                                         | -                          | Pass   | 13-Dec-2025 | - SortPrice: `asc`<br/>- Page: 1<br/>- Limit: 10                                                                                                                   |                                                                                  |
| 47  | P-SD-08 | Sort products by price descending                         | - List products sorted by price desc                                                                        | - Products returned in descending price order                                                                                                        | -                          | Pass   | 13-Dec-2025 | - SortPrice: `desc`<br/>- Page: 1<br/>- Limit: 10                                                                                                                  |                                                                                  |
| 48  | P-SD-09 | Sort products by rating ascending                         | - List products sorted by rating asc                                                                        | - Products returned in ascending rating order                                                                                                        | -                          | Pass   | 13-Dec-2025 | - SortRating: `asc`<br/>- Page: 1<br/>- Limit: 10                                                                                                                  |                                                                                  |
| 49  | P-SD-10 | Sort products by rating descending                        | - List products sorted by rating desc                                                                       | - Products returned in descending rating order                                                                                                       | -                          | Pass   | 13-Dec-2025 | - SortRating: `desc`<br/>- Page: 1<br/>- Limit: 10                                                                                                                 |                                                                                  |
| 50  | P-SD-11 | Filter by price range                                     | - List products with price range filter                                                                     | - Only products within price range returned<br/>- All products have price >= minPrice and <= maxPrice                                                | -                          | Pass   | 13-Dec-2025 | - MinPrice: 400000<br/>- MaxPrice: 600000                                                                                                                          |                                                                                  |
| -   | -       | **TestProductCacheInvalidationSuite**                     |                                                                                                             |                                                                                                                                                      |                            |        |             |                                                                                                                                                                    |                                                                                  |
| 51  | P-CI-01 | Create product and verify cache population                | - Create product<br/>- Get product twice                                                                    | - Product created successfully<br/>- First get populates cache<br/>- Second get hits cache (identical data)                                          | -                          | Pass   | 13-Dec-2025 | - Name: `Cache Test Product`<br/>- Variant: SKU `CACHE-TEST-001`                                                                                                   |                                                                                  |
| 52  | P-CI-02 | Update product and verify cache invalidation              | - Update product name<br/>- Get product                                                                     | - Update succeeds<br/>- Cache invalidated<br/>- Get returns fresh updated data                                                                       | P-CI-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-CI-01<br/>- New Name: `Updated Cache Test Product`                                                                                             |                                                                                  |
| 53  | P-CI-03 | List products and verify cache                            | - List products twice with same parameters                                                                  | - First list populates cache<br/>- Second list hits cache (identical results)                                                                        | P-CI-01                    | Pass   | 13-Dec-2025 | - CategoryIDs: [seeded category]<br/>- Page: 1<br/>- Limit: 10                                                                                                     |                                                                                  |
| 54  | P-CI-04 | Update product and verify list cache invalidation         | - Update product<br/>- List products with same parameters                                                   | - Update succeeds<br/>- List cache invalidated<br/>- List returns fresh data with updates                                                            | P-CI-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-CI-01<br/>- Description: `Updated description to invalidate cache`                                                                             |                                                                                  |
| 55  | P-CI-05 | Add images and verify cache invalidation                  | - Get product<br/>- Add images<br/>- Get product again                                                      | - Images added successfully<br/>- Cache invalidated<br/>- Product has more images                                                                    | P-CI-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-CI-01<br/>- Images: 1 new image                                                                                                                |                                                                                  |
| 56  | P-CI-06 | Delete images and verify cache invalidation               | - Get product<br/>- Delete first image<br/>- Get product again                                              | - Image deleted successfully<br/>- Cache invalidated<br/>- Product has fewer images                                                                  | P-CI-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-CI-01<br/>- ImageID: first image                                                                                                               |                                                                                  |
| 57  | P-CI-07 | Delete product and verify cache                           | - Delete product<br/>- Attempt to get product<br/>- List products                                           | - Delete succeeds<br/>- Get fails with not found<br/>- List excludes deleted product                                                                 | P-CI-01                    | Pass   | 13-Dec-2025 | - ProductID: from P-CI-01                                                                                                                                          |                                                                                  |
| 58  | P-CI-08 | Verify different list params create different cache keys  | - List with price filter<br/>- List without price filter<br/>- List with different page                     | - Different parameters create different cache entries<br/>- Results differ appropriately<br/>- Pagination works correctly                            | -                          | Pass   | 13-Dec-2025 | - Filter 1: MinPrice: 100000, MaxPrice: 500000<br/>- Filter 2: no filters<br/>- Filter 3: Page 2                                                                   |                                                                                  |

### Summary

**Test Coverage:**

- ✅ Product CRUD operations (Create, Read, Update, Delete)
- ✅ Simple products (1 variant, no options)
- ✅ Configurable products (multiple variants with options)
- ✅ Product variants management (create, update, link to option values)
- ✅ Product options and option values (create, update)
- ✅ Product images (upload to S3, add, delete, associate with variants)
- ✅ Redis cache behavior (hits, misses, invalidation)
- ✅ Soft delete cascading (products, variants, options, images)
- ✅ Validation rules (name length, description length, price, quantity)
- ✅ Error handling (non-existent resources, invalid inputs)
- ✅ Pagination and filtering (category, price range, search)
- ✅ Sorting (by price, by rating)
- ✅ Seeded data integration
- ✅ S3 object storage integration (presigned URLs, uploads)

**Test Execution:**

- Total test suites: 5
- Total test cases: 58
- Passed: 56
- Failed: 2 (known defect DF-P-AR-01)

**Known Issues:**

- **DF-P-AR-01**: Attributes are not being returned in product response DTOs (affects P-PL-01, P-PL-02)

**Test Quality:**

- Each test suite uses isolated testcontainers (PostgreSQL, Redis, MinIO)
- Proper setup/teardown for each test
- Tests verify both functional behavior and side effects (cache, database state)
- Comprehensive coverage of happy paths and error cases
- Tests run in parallel for efficiency
- Vietnamese text support verified

**Test Infrastructure:**

- PostgreSQL with ParadeDB for full-text search
- Redis for caching
- MinIO (S3-compatible) for object storage
- Database seeding for realistic test scenarios
- Transaction support for data integrity
